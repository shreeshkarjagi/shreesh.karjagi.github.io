---
---
<div class="row">
  <!-- Preview/Image section -->
  <div class="col-sm-2 {% if entry.preview %}preview{% else %}abbr{% endif %}">
    {%- if entry.preview -%}
      {% if entry.preview contains '://' -%}
      <img class="preview z-depth-1 rounded" src="{{ entry.preview }}">
      {%- else -%}
        {%- assign entry_path = entry.preview | prepend: '/assets/img/publication_preview/' -%}
        {% include figure.html 
        path=entry_path 
        class="preview z-depth-1 rounded"
        alt=entry.preview -%}
      {%- endif -%}
    {%- endif -%}
  </div>

  <!-- Entry bib key -->
  <div id="{{entry.key}}" class="col-sm-8">
    <!-- Title -->
    <div class="title">{{entry.title}}</div>
    
    <!-- Author -->
    <div class="author">
      {%- for author in entry.author_array -%}
        {%- assign author_is_self = false -%}
        {%- if site.scholar.last_name contains author.last -%}
          {%- if site.scholar.first_name contains author.first -%}
            {%- assign author_is_self = true -%}
          {%- endif -%}
        {%- endif -%}

        {%- if forloop.length > 1 -%}
          {%- if forloop.first == false -%},&nbsp;{%- endif -%}
          {%- if forloop.last -%}&nbsp;and&nbsp;{%- endif -%}
        {%- endif -%}

        {%- if author_is_self -%}
          <em><u>{{author.first}} {{author.last}}</u></em>
        {%- else -%}
          {{author.first}} {{author.last}}
        {%- endif -%}
      {%- endfor -%}
    </div>

    <!-- Journal/Book title and date -->
    <div class="periodical">
      {{ entry.journal }}
      {% if entry.volume %}<strong>{{ entry.volume }}</strong>{% endif %}
      {% if entry.number %}({{ entry.number }}){% endif %}
      {% if entry.pages %}, {{ entry.pages }}{% endif %}
      ({{ entry.year }})
    </div>

    <!-- Links/Buttons -->
    <div class="links">
      {%- if entry.abstract %}
        <a class="abstract btn btn-sm z-depth-0" role="button">Abstract</a>
      {%- endif %}
      {%- if entry.contribution %}
        <a class="contribution btn btn-sm z-depth-0" role="button">Contribution</a>
      {%- endif %}
      {%- if entry.arxiv %}
        <a href="http://arxiv.org/abs/{{ entry.arxiv }}" class="btn btn-sm z-depth-0" role="button">arXiv</a>
      {%- endif %}
      {%- if entry.pdf %}
        {% if entry.pdf contains '://' -%}
        <a href="{{ entry.pdf }}" class="btn btn-sm z-depth-0" role="button">PDF</a>
        {%- else -%}
        <a href="{{ entry.pdf | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">PDF</a>
        {%- endif %}
      {%- endif %}
      {%- if entry.code %}
        <a href="{{ entry.code }}" class="btn btn-sm z-depth-0" role="button">Code</a>
      {%- endif %}
      {%- if entry.website %}
        <a href="{{ entry.website }}" class="btn btn-sm z-depth-0" role="button">Website</a>
      {%- endif %}
    </div>

    <!-- Hidden blocks -->
    {% if entry.abstract -%}
    <div class="abstract hidden">
      <p>{{ entry.abstract }}</p>
    </div>
    {%- endif -%}

    {% if entry.contribution -%}
    <div class="contribution hidden">
      <p>{{ entry.contribution }}</p>
    </div>
    {%- endif -%}
  </div>
</div>

<script type="text/javascript">
// Wait for document load
$(document).ready(function() {
  // Toggle abstract
  $('.abstract.btn').click(function() {
    $(this).closest('.entry').find('.abstract.hidden').slideToggle();
  });
  
  // Toggle contribution
  $('.contribution.btn').click(function() {
    $(this).closest('.entry').find('.contribution.hidden').slideToggle();
  });
});
</script>

<style>
.hidden {
  display: none;
  padding: 1rem;
  margin-top: 0.5rem;
  border-radius: 4px;
  background-color: rgba(0,0,0,0.03);
}

.links {
  margin-top: 0.5rem;
}

.preview {
  width: 100%;
  height: auto;
  max-height: 200px;
  object-fit: contain;
}
</style>